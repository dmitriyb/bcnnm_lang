define immovable cell FSMC from MuscleCell #define frog sceletal muscle cell

    constants:
        F:     9.648533e+04   #Faraday's constant (ะก/mol)
        T:                    #absolute temperature (K)
        R:                    #gas constant ()
        ZNa:   1              #magnitude of the Sodium valence (dimensionless)
        ZK:    1              #magnitude of the Potassium valence (dimensionless)
        ZCl:   1              #magnitude of the Chloride valence (dimensionless)
        PumpR: 1.5e+00        #normal Na/K pump ratio that is 3/2 (dimensionless)
        Pna:                  #numbers of pores/cm^2 times the permeability (cm^3*pore-1*s-1) os a single pore
        Pk:
        Pcl:
        #time in seconds

    variables
        #molecules
        Ko:
        Ki:
        Nao:
        Nai:
        Clo:
        Cli:
        ATP:

        #other
        Vm:                   #membrane voltage
        PsiNa:                #ratio of potential to random thermal energy (dimensionless)
        PsiK:                 #ratio of potential to random thermal energy (dimensionless)
        PsiCl:                #ratio of potential to random thermal energy (dimensionless)
        PfNa:                 #Na+ flux through the pump
        PfK:                  #K+ flux through the pump


    compartments:
        none


    conditions:
        none
        #to be added


    mechanisms:
        declaration:
            #membrane voltage calculation
            cyclic VoltageCalc(duration: 1) from Linear
                parameters: (Vm)
                Vm: R * T / F * ln((Pna * Nao + Pk * Ko + Pcl * Cli - Ipump / F) / (Pna * Nai + Pk * Ki + Pcl * Clo))

            #calculation of Psi for all ions
            cyclic PsiNaCalc(duration: ) from
                parameters: (PsiNa)
                PsiNa: Zna * Vm * F / R * T

            cyclic PsiKCalc(duration: ) from
                parameters: (PsiK)
                PsiK: Zk * Vm * F / R * T

            cyclic PsiClCalc(duration: ) from
                parameters: (PsiCl)
                PsiCl: Zcl * Vm * F / R * T

            #permeant ion species through channels in the membrane
            cyclic PotassiumPassiveFlux(duration: ) from
                parameters: (Ik)
                Ik: Pk * F * Zk * (Ki * (e ^ PsiK) - Ko)

            cyclic SodiumPassiveFlux(duration: ) from
                parameters: (Ina)
                Ina: Pna * F * Zna * (Nai * (e ^ PsiNa) - Nao)

            cyclic ChloridePassiveFlux(duration: ) from
                parameters: (Icl)
                Icl: Pcl * F * Zcl * (Cli * (e ^ PsiCl) - Clo)

            #Na+ and K+ flux through the pump
            cyclic SodiumPumpFlux(duration: ) from
                parameters: (PfNa)
                PfNa: 2.17 * ATP / (1 + Nac / Nai)

            cyclic PotassiumPumpFlux(duration: ) from
                parameters: (PfK)
                PfK: (-1) * PfNa / PumpR

            #pump current
            cyclic PumpCurrent(duration: ) from
                parameters: (Ipump)
                Ipump: (PfNa + PfK) * F


        initial:
            VoltageCalc
            PsiNaCalc
            PsiKCalc
            PsiClCalc
            PotassiumPassiveFlux
            SodiumPassiveFlux
            SodiumPumpFlux
            PotassiumPumpFlux
            PumpCurrent

        mutually exclusive:
            none
